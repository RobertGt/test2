jQuery.validator.addMethod("isMobile", function(value, element) {
    var length = value.length;
    var mobile = /^(13[0-9]{9})|(18[0-9]{9})|(14[0-9]{9})|(17[0-9]{9})|(15[0-9]{9})$/;
    return this.optional(element) || (length == 11 && mobile.test(value));
}, "<i class='fa fa-times-circle'></i> 请正确填写您的手机号码");
$.validator.setDefaults({
	highlight: function(e) {
		$(e).closest(".form-group").removeClass("has-success").addClass("has-error")
	},
	success: function(e) {
		e.closest(".form-group").removeClass("has-error").addClass("has-success")
	},
	errorElement: "span",
	errorPlacement: function(e, r) {
		e.appendTo(r.is(":radio") || r.is(":checkbox") ? r.parent().parent().parent() : r.parent())
	},
	errorClass: "help-block m-b-none",
	validClass: "help-block m-b-none"
}), $().ready(function() {
	$("#commentForm").validate();
	var e = "<i class='fa fa-times-circle'></i> ";
	$("#signupForm").validate({
		rules: {
			firstname: "required",
			lastname: "required",
			username: {
				required: true,
				minlength: 2,
                maxlength: 10
			},
			name:{
				required: true,
				maxlength: 10
			},
            ringName:{
				required: true,
				maxlength: 5
			},
			verify: {
				required:true,
				minlength: 4,
				maxlength: 4
			},
            title: {
				required:true,
				maxlength: 20
			},
            newPassword: {
				required: true,
				minlength: 6
			},
            author : {
                required: true,
                maxlength: 6
			},
			password: {
				required: true,
				minlength: 6
			},
            editPassword: {
                required: false,
                minlength: 6
			},
            repeatPassword: {
				required: false,
				minlength: 6,
				equalTo: "#newPassword"
			},
            describe:{
                required: true,
                maxlength: 120
			},
			mobile : {
				required : true,
				minlength : 11,
				isMobile : true
			},
			email: {
				required: !0,
				email: !0
			},
			topic: {
				required: "#newsletter:checked",
				minlength: 2
			},
			agree: "required"
		},
		messages: {
			firstname: e + "请输入你的姓",
			lastname: e + "请输入名字",
			username: {
				required: e + "请输入您的用户名",
				minlength: e + "用户名必须两个字符以上",
                maxlength: e + "用户名不得超出10个字符以上",
			},
            ringName:{
                required: e + "请输入铃声名称",
                minlength: e + "名称不得超出5个字符以上"
            },
            author:{
                required: e + "请输入作者名称",
                maxlength: e + "作者名称不得超出10个字符以上"
            },
            describe :{
                required: e + "请输入文章摘要",
                maxlength: e + "作者名称不得超出120个字符以上"
			},
            name:{
                required: e + "请输入图标名称",
                minlength: e + "图标名称不得超出10个字符以上"
			},
			password: {
				required: e + "请输入您的原密码",
				minlength: e + "密码必须6个字符以上"
			},
			newPassword: {
				required: e + "请输入您的密码",
				minlength: e + "密码必须6个字符以上"
			},
            editPassword: {
                minlength: e + "密码必须6个字符以上"
            },
            repeatPassword: {
				required: e + "请再次输入密码",
				minlength: e + "密码必须6个字符以上",
				equalTo: e + "两次输入的密码不一致"
			},
            title :{
                required: e + "请输入文章标题",
                minlength: e + "文章标题不得超出20个字符以上"
			},
			email: e + "请输入您的E-mail",
			agree: {
				required: e + "必须同意协议后才能注册",
				element: "#agree-error"
			}
		}
	}), $("#username").focus(function() {
		var e = $("#firstname").val(),
			r = $("#lastname").val();
		e && r && !this.value && (this.value = e + "." + r)
	})
});
